{"version":3,"sources":["app/home/home.component.ts"],"names":[],"mappings":"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","file":"app/home/home.component.js","sourcesContent":["import { Component, ElementRef, AfterViewInit } from '@angular/core';\nimport { Search } from './search';\nimport { GithubSearchService } from './github.service';\nimport { CONSTANTS } from '../shared';\n\ndeclare var $:any;\n\n@Component({\n    selector: 'as-home',\n    templateUrl: 'app/home/home.html',\n    styleUrls: [\n        'app/home/home.css'\n    ],\n   directives: [  ],\n    providers: [ GithubSearchService ]\n})\nexport class HomeComponent implements AfterViewInit {\n    public repos: Array<any> = [];\n    public originalRepos: Array<any> = [];\n    public languageTags: Array<any> = [];\n\n    public elementRef: ElementRef;\n    public strings;\n    public model = new Search('');\n    public fetching: Boolean = false;\n    public isError: Boolean = false;\n    public isEmpty = null;\n    public repoCount = 0;\n    public pageNumber = 1;\n    public loadingMore = false;\n    public maxStarCount = 100;\n    public sliderMaxCount;\n    public starSlider;\n    public sortedByHighest = true;\n    public sortedByLowest = false;\n    public totalRateLimit;\n    public totalRateLimitRemaining;\n    \n    constructor(private githubSearchService: GithubSearchService, elementRef: ElementRef) {\n        this.elementRef = elementRef;\n        this.strings = CONSTANTS.MAIN.APP;\n    }\n\n    onSubmit() { \n        this.fetching = true;\n        this.clearRepos();\n        this.fetchRepos(this.pageNumber);\n    }\n\n    fetchRepos(pageNumber) {\n        this.githubSearchService.getReposByUsername(this.model.text, pageNumber)\n                        .subscribe(\n                            this.success.bind(this),\n                            this.error.bind(this)\n                        );\n    }\n\n    fetchNextPage() {\n        this.loadingMore = true;\n        this.pageNumber++;\n        this.fetchRepos(this.pageNumber);\n    }\n\n    clearRepos() {\n        this.repos = [];\n        this.originalRepos = [];\n    }\n\n    success(repos) {\n        this.repos = this.repos.concat(repos.items);\n        this.originalRepos = this.repos;\n        this.repoCount = repos.total_count;\n        \n        this.isError = false;\n\n        if(repos.length === 0) {\n            this.isEmpty = true;\n        } else {\n            this.isEmpty = false;\n            this.getMaxStarCount();\n        }\n\n        this.fetching = false;\n        this.loadingMore = false;\n\n        this.fetchRateLimit();\n    }\n\n    error(error) {\n        this.handleError();\n    }\n\n    fetchRateLimit() {\n        this.githubSearchService.getApiRateLimit()\n                                .subscribe(\n                                    this.rateLimitSuccess.bind(this),\n                                    this.rateLimitFailure.bind(this)\n                                );\n    }\n\n    rateLimitSuccess(response) {\n        this.totalRateLimit = response.limit;\n        this.totalRateLimitRemaining = response.remaining;\n    }\n\n    rateLimitFailure(error) {\n        console.error(\"Could not get rate limit response\", error);\n    }\n\n    getMaxStarCount() {\n        this.maxStarCount = this.repos[0].stargazers_count;\n        this.sliderMaxCount = this.maxStarCount;\n        this.starSlider.slider(\"option\", \"max\", this.maxStarCount);\n        this.starSlider.slider(\"option\", \"value\", this.maxStarCount);\n    }\n\n    handleError() {\n        this.fetching = false;\n        this.isError = true;\n        this.isEmpty = false;\n        this.repos = null;\n        this.repoCount = 0;\n    }\n\n    // Slider Range Change detection\n    filterReposByStar(stars) {\n       this.repos =  this.originalRepos.filter(function(repo) {\n            return repo.stargazers_count <= stars;\n        });\n\n    }\n\n    sortByHighest() {\n        this.repos = this.originalRepos.sort(function(item1, item2):any {\n            // return item1.stargazers_count >= item2.stargazers_count;\n            return item2.stargazers_count - item1.stargazers_count; \n        });\n\n        this.sortedByHighest = true;\n        this.sortedByLowest = false;\n    }\n\n    sortByLowest() {\n        this.repos = this.originalRepos.sort(function(item1, item2):any {\n            // return item1.stargazers_count >= item2.stargazers_count;\n            return item1.stargazers_count - item2.stargazers_count;\n        });\n\n        console.log(this.repos);\n\n        this.sortedByLowest = true;\n        this.sortedByHighest = false;\n    }\n\n    toggleFilterContainer(e) {\n        let currentElement = $(e.currentTarget);\n        currentElement.toggleClass(\"up-arrow\");\n        $(this.elementRef.nativeElement).find(\".filter-options\").slideToggle();\n    }\n\n    ngAfterViewInit() {\n        let self = this;\n        \n        // Init Autocomplete\n        this.githubSearchService.getLanguageTags().subscribe(function(tags){\n            this.languageTags = tags;\n            $(this.elementRef.nativeElement).find(\".search-text\").autocomplete({\n                source: this.languageTags,\n                select: function( event, ui ) {\n                    console.log(ui.item.value);\n                    self.model.text = ui.item.value; \n                }\n            });\n        }.bind(this), function(error){\n            console.error(\"Could not fetch language tags\", error);\n        }.bind(this));\n\n        // Initialize Slider\n        this.starSlider = $(this.elementRef.nativeElement).find(\"#slider\").slider({\n            range: false,\n            min: 0,\n            max: 20000,\n            value: this.maxStarCount,\n            slide: ( event, ui ) => {\n                this.maxStarCount = ui.value;\n                this.filterReposByStar(ui.value);\n            }\n        });\n    }\n}\n"],"sourceRoot":"/source/"}